# Profile Synchronization

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª–µ–π

–ü—Ä–æ—Ñ–∏–ª–∏ Firefox —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏, —á—Ç–æ–±—ã —Å–µ—Å—Å–∏–∏, cookies –∏ –ø–∞—Ä–æ–ª–∏ –±—ã–ª–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –æ–±–æ–∏—Ö –ø—Ä–æ—Ñ–∏–ª—è—Ö.

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

1. **–†–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å Firefox:** `~/.mozilla/firefox/1sn3zs0y.default-release`
   - –í–∞—à –æ–±—ã—á–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä Firefox
   
2. **–ü—Ä–æ—Ñ–∏–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:** `~/.mozilla/firefox/ai-automation-profile`
   - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Playwright –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏

3. **–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
   - –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º: cookies –∏ storage –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –ò–ó —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è
   - –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è: cookies –∏ storage –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –í —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
   - –§–æ–Ω–æ–≤—ã–π watcher: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥

## –ß—Ç–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è

- ‚úÖ Cookies (`cookies.sqlite`)
- ‚úÖ LocalStorage (`webappsstore.sqlite`)
- ‚úÖ IndexedDB –∏ –¥—Ä—É–≥–∏–µ storage (`storage/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è)
- ‚úÖ Storage database (`storage.sqlite`)
- ‚ùå History (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è)
- ‚ùå Bookmarks (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è)
- ‚ùå Extensions (–Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è)

## –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

```bash
# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ò–ó —Ä–µ–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è –í automation
./sync-profiles.sh to-automation

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ò–ó automation –í —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å  
./sync-profiles.sh from-automation

# –£–º–Ω–∞—è –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –Ω–æ–≤–µ–π—à–∏–µ –¥–∞–Ω–Ω—ã–µ)
./sync-profiles.sh both
```

## –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π watcher

### –ó–∞–ø—É—Å–∫ watcher
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤ —Ñ–æ–Ω–µ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 60 —Å–µ–∫—É–Ω–¥
nohup ./watch-sync.sh 60 > /tmp/profile-sync-watcher.log 2>&1 &
echo $! > /tmp/profile-sync-watcher.pid
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–∏ watcher
ps aux | grep watch-sync | grep -v grep

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
tail -f /tmp/profile-sync-watcher.log
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ watcher
```bash
kill $(cat /tmp/profile-sync-watcher.pid)
rm /tmp/profile-sync-watcher.pid
```

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

```javascript
const BrowserHelper = require('./browser-helper');

const browser = new BrowserHelper({
  autoSync: true  // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–∫–ª—é—á–µ–Ω–æ
});

await browser.launch();  // –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ü–ï–†–ï–î –∑–∞–ø—É—Å–∫–æ–º
// ... —Ä–∞–±–æ—Ç–∞ —Å –±—Ä–∞—É–∑–µ—Ä–æ–º ...
await browser.close();   // –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ü–û–°–õ–ï –∑–∞–∫—Ä—ã—Ç–∏—è
```

–û—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é:

```javascript
const browser = new BrowserHelper({
  autoSync: false  // –æ—Ç–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
});
```

## –õ–æ–≥–∏–∫–∞ watcher

Watcher —É–º–Ω—ã–π –∏ –∑–Ω–∞–µ—Ç –∫–æ–≥–¥–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å:

- üü¢ **–û–±–∞ –ø—Ä–æ—Ñ–∏–ª—è –∑–∞–∫—Ä—ã—Ç—ã** ‚Üí –î–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω—è—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è (newer wins)
- üîµ **–¢–æ–ª—å–∫–æ —Ä–µ–∞–ª—å–Ω—ã–π Firefox –æ—Ç–∫—Ä—ã—Ç** ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è TO automation
- üü° **–¢–æ–ª—å–∫–æ automation –æ—Ç–∫—Ä—ã—Ç** ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è FROM automation  
- üî¥ **–û–±–∞ –æ—Ç–∫—Ä—ã—Ç—ã** ‚Üí –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ)

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—ã –ª–æ–≥–∏–Ω–∏—Ç–µ—Å—å –≤ –Ω–æ–≤—ã–π —Å–∞–π—Ç –≤ –æ–±—ã—á–Ω–æ–º Firefox
1. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ Firefox, –ª–æ–≥–∏–Ω–∏—Ç–µ—Å—å –Ω–∞ —Å–∞–π—Ç–µ
2. –ó–∞–∫—Ä—ã–≤–∞–µ—Ç–µ Firefox
3. Watcher –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–ø–∏—Ä—É–µ—Ç cookies –≤ automation –ø—Ä–æ—Ñ–∏–ª—å
4. –ó–∞–ø—É—Å–∫–∞–µ—Ç–µ automation —Å–∫—Ä–∏–ø—Ç - –≤—ã —É–∂–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã!

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: Automation –ª–æ–≥–∏–Ω–∏—Ç—Å—è –Ω–∞ —Å–∞–π—Ç
1. Automation —Å–∫—Ä–∏–ø—Ç –ª–æ–≥–∏–Ω–∏—Ç—Å—è –Ω–∞ Facebook
2. –°–∫—Ä–∏–ø—Ç –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è (–≤—ã–∑—ã–≤–∞–µ—Ç `browser.close()`)
3. Cookies –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ñ–∏–ª—å
4. –û—Ç–∫—Ä—ã–≤–∞–µ—Ç–µ –æ–±—ã—á–Ω—ã–π Firefox - –≤—ã –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã!

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ Firefox –∑–∞–∫—Ä—ã—Ç (–±–µ–∑–æ–ø–∞—Å–Ω–æ)
- Watcher –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –∫–æ–≥–¥–∞ –æ–±–∞ Firefox –æ—Ç–∫—Ä—ã—Ç—ã (–∏–∑–±–µ–≥–∞–µ—Ç –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è)
- –ö–æ–ø–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ cookies –∏ storage, –Ω–µ sensitive –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –ø–∞—Ä–æ–ª–∏

## Troubleshooting

### –ü—Ä–æ—Ñ–∏–ª–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ watcher –∑–∞–ø—É—â–µ–Ω
ps aux | grep watch-sync

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å watcher
kill $(cat /tmp/profile-sync-watcher.pid 2>/dev/null)
nohup ./watch-sync.sh 60 > /tmp/profile-sync-watcher.log 2>&1 &
```

### –†—É—á–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
```bash
# –ó–∞–∫—Ä—ã—Ç—å –≤—Å–µ Firefox
pkill -f firefox
sleep 2

# –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
./sync-profiles.sh both
```
